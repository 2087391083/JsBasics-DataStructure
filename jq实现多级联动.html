<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>多级联动——jquery</title>
    <script src="../jQuery-3.1.1/jQuery-3.1.1.min.js"></script>
</head>

<body>
    <h3>实现动态联动菜单；</h3>
    <form action="">
        <select id="p" name="p" class="form-control">

        </select>
        <select id="c" name="c" class="form-control">

        </select>
    </form>
    <script>
        var menu = [
            {
                name: '四川',
                pid: 20,
                children: [
                    { name: '成都', cid: 20001 },
                    { name: '德阳', cid: 20002 },
                    { name: '绵阳', cid: 20003 },
                    { name: '乐山', cid: 20004 },
                    { name: '广元', cid: 20005 }
                ]
            },
            {
                name: '河南',
                pid: 10,
                children: [
                    { name: '郑州', cid: 10001 },
                    { name: '开封', cid: 10002 },
                    { name: '洛阳', cid: 10003 },
                    { name: '信阳', cid: 10004 },
                    { name: '安阳', cid: 10005 }
                ]
            }
        ];
        let p = $("#p");
        let pstr = "<option value='0'>——请选择省份——</option>";
        menu.forEach(function (el) {
            pstr += `<option value="${el.pid}"> ${el.name} </option>`;
        });
        p.html(pstr);
        let c = $("#c");
        p.change ( function () {
            let pstr = "<option value='0'>——请选择城市——</option>";
            let pval = $("#p").val();
            console.log(pval);
            let index = menu.findIndex(el=>el.pid == pval);
            console.log(index);
            menu[index].children.forEach(function (el) {
                pstr += `<option value="${el.pid}"> ${el.name} </option>`;
            });
            c.html(pstr);
        })

    </script>
</body>

</html>